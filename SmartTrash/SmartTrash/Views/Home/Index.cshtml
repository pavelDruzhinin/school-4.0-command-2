@{
    ViewData["Title"] = "Home Page";
}

<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=67d4d207-33ec-4766-bd1c-6fe0bbcd9c31" type="text/javascript"></script>
<script src="./js/map.js" type="text/javascript"></script>


<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Карта</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <div class="btn-group mr-2">
            <!--button class="btn btn-sm btn-outline-secondary">Share</!--button>
            <button class="btn btn-sm btn-outline-secondary">Export</button-->
        </div>
    </div>
</div>

<div class="mb-4" id="map">
    
</div>

<h2>Мусорные баки</h2>
<div class="table-responsive">
    <table id ="trashpoints" class="table table-striped table-hover">
        <thead>
        <tr>
            <th>Название</th>
            <th>Координаты</th>
            <th>Объем, л.</th>
            <th>Наполненность, %</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

@section scripts
{
    <script>
        $(document).ready(function() {
            $.ajax({
                    url: '/Home/GetFilters',
                    contentType: 'application/html; charset=utf-8',
                    type: 'GET',
                    dataType: 'html',
                    success: function(result) {
                        $('#filters').html(result);
                        $("#fillFilter").ionRangeSlider({
                            type: "double",
                            min: 1,
                            max: 100,
                            grid: true
                        });
                    },
                    error: function(status) {
                        console.log(status);
                    }
            });

            var table = $('#trashpoints').DataTable({
                ajax: {
                    url: "/areas",
                    dataSrc: ""
                },
                columns: [
                    {
                        data: 'name'
                    },
                    {
                        data: {
                            latitude:'latitude',
                            longitude:'longitude'
                        },
                        render: function (data) { return data.latitude + '; ' + data.longitude }
                    },
                    {
                        data: 'volume'
                    },
                    {
                        data: 'percentOfFill',
                        render: function (data) {return Math.round(data)}
                    }
                ]
            });

        });
    </script>
}





